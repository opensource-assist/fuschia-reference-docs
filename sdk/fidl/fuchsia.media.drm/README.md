[TOC]

# fuchsia.media.drm


## **PROTOCOLS**

## ContentDecryptionModule {#ContentDecryptionModule}
*Defined in [fuchsia.media.drm/content_decryption.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/content_decryption.fidl#25)*

<p>A protocol for managing content license sessions and providing decryption of
media content. There may be zero to many active <a class='link' href='#LicenseSession'>LicenseSession</a>s
associated with a <code>ContentDecryptionModule</code>, each with their own sets of
keys.</p>
<p>From an EME client's perspective, this protocol has a 1:1 relationship with
the MediaKeys object.</p>

### OnProvisioned {#OnProvisioned}

<p>Indicates that the <code>ContentDecryptionModule</code> is provisioned.</p>
<p>In order to create <code>LicenseSession</code>s, a <code>ContentDecryptionModule</code> must
be provisioned. A <code>ContentDecryptionModule</code> is not considered
provisioned until it meets the requirements for the underlying DRM
system. The DRM system may not require provisioning, may only require
factory provisioning or may require both factory provisioning and
service instance provisioning.</p>
<p>If the <code>ContentDecryptionModule</code> has already has sufficient
provisioning, this event will be sent immediately upon creation. If the
<code>ContentDecryptionModule</code> has its provisioning removed, then the server
will close the channel and also close any active <code>LicenseSession</code>s or
Decryptors.</p>
<p>If the DRM system does not require provisioning at all, this
event should still be sent to notify the client that it can create
<code>LicenseSession</code>s.</p>



#### Response
<table>
    <tr><th>Name</th><th>Type</th></tr>
    </table>

### SetServerCertificate {#SetServerCertificate}

<p>Sets the certificate to be used for encrypting outgoing messages.</p>
<ul>
<li>request <code>certificate</code> a buffer containing the certificate to be used.</li>
</ul>
<ul>
<li>error an <a class='link' href='#Error'>Error</a> indicating the reason for failure.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>certificate</code></td>
            <td>
                <code>vector&lt;uint8&gt;</code>
            </td>
        </tr></table>


#### Response
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>result</code></td>
            <td>
                <code><a class='link' href='#ContentDecryptionModule_SetServerCertificate_Result'>ContentDecryptionModule_SetServerCertificate_Result</a></code>
            </td>
        </tr></table>

### CreateLicenseSession {#CreateLicenseSession}

<p>Creates a new session for the given type.</p>
<p>The <code>session_id</code> will be generated by the <a class='link' href='#ContentDecryptionModule'>ContentDecryptionModule</a>
and can be used to reload the session after closing. If the
<code>session_type</code> is not supported by the underlying DRM system, it will
immediately close the <code>license_session</code>.</p>
<ul>
<li>request <code>session_type</code> a field containing either
<a class='link' href='#LicenseSessionType.TEMPORARY'>LicenseSessionType.TEMPORARY</a>,
<a class='link' href='#LicenseSessionType.PERSISTENT_LICENSE'>LicenseSessionType.PERSISTENT_LICENSE</a> or
<a class='link' href='#LicenseSessionType.PERSISTENT_USAGE_RECORD'>LicenseSessionType.PERSISTENT_USAGE_RECORD</a></li>
<li>request <code>license_session</code> the server endpoint of the
<a class='link' href='#LicenseSession'>LicenseSession</a></li>
</ul>
<ul>
<li>response <code>session_id</code> an identifier that can be used to reload the
session later (if persistent).</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>session_type</code></td>
            <td>
                <code><a class='link' href='#LicenseSessionType'>LicenseSessionType</a></code>
            </td>
        </tr><tr>
            <td><code>license_session</code></td>
            <td>
                <code>request&lt;<a class='link' href='#LicenseSession'>LicenseSession</a>&gt;</code>
            </td>
        </tr></table>


#### Response
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>session_id</code></td>
            <td>
                <code>string</code>
            </td>
        </tr></table>

### LoadLicenseSession {#LoadLicenseSession}

<p>Loads an existing session from storage using the given <code>session_id</code>.</p>
<p>If the session is not found, then the <code>license_session</code> will be closed.</p>
<ul>
<li>request <code>session_id</code> contains an identifier of which session should be
loaded from storage.</li>
<li>request <code>license_session</code> the server endpoint of the
<a class='link' href='#LicenseSession'>LicenseSession</a>.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>session_id</code></td>
            <td>
                <code>string</code>
            </td>
        </tr><tr>
            <td><code>license_session</code></td>
            <td>
                <code>request&lt;<a class='link' href='#LicenseSession'>LicenseSession</a>&gt;</code>
            </td>
        </tr></table>



### CreateDecryptor {#CreateDecryptor}

<p>Creates a Decryptor <a class='link' href='../fuchsia.media/'>fuchsia.media</a>/<a class='link' href='../fuchsia.media/#StreamProcessor'>StreamProcessor</a> to be used to
decrypt content.</p>
<p>This <code>decryptor</code> would have access to the union of keys created by all
the active sessions for this <a class='link' href='#ContentDecryptionModule'>ContentDecryptionModule</a>.</p>
<ul>
<li>request <code>params</code> the parameters with which to create the <code>decryptor</code>.</li>
<li>request <code>decryptor</code> the server endpoint of the
<code>fuchsia.media/StreamProcessor</code>.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>params</code></td>
            <td>
                <code><a class='link' href='#DecryptorParams'>DecryptorParams</a></code>
            </td>
        </tr><tr>
            <td><code>decryptor</code></td>
            <td>
                <code>request&lt;<a class='link' href='../fuchsia.media/'>fuchsia.media</a>/<a class='link' href='../fuchsia.media/#StreamProcessor'>StreamProcessor</a>&gt;</code>
            </td>
        </tr></table>



### GetKeyStatusForHdcpVersion {#GetKeyStatusForHdcpVersion}

<p>Queries the status of a hypothetical key associated with an HDCP policy.</p>
<p>This aids clients in determining which content type to fetch prior to
establishing a <a class='link' href='#LicenseSession'>LicenseSession</a>. For example, if the device would
restrict output for HDCP 1.x, then the client can choose to fetch SD
content rather than HD.</p>
<ul>
<li>request <code>hdcp_version</code> a field containing the HDCP version to check,
such as &quot;1.2&quot; or &quot;2.0&quot;.</li>
</ul>
<ul>
<li>response <code>key_status</code> a field indicating what the status of a
hypothetical key would be for this device if one could be licensed.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>hdcp_version</code></td>
            <td>
                <code>string</code>
            </td>
        </tr></table>


#### Response
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>key_status</code></td>
            <td>
                <code><a class='link' href='#KeyStatus'>KeyStatus</a></code>
            </td>
        </tr></table>

### GetSupportedEncryptionSchemes {#GetSupportedEncryptionSchemes}

<p>Queries for the list of supported encryption schemes.</p>
<p>This returns a list of the supported encryption schemes that the
<code>ContentDecryptionModule</code> supports, such as 'cenc' or 'cbcs'. If the
implementation supports passing unencrypted frames through decryption
prior to license arrival, it should also report
<code>fuchsia.media.UNECNRYPTED</code> as a supported scheme.</p>
<ul>
<li>response <code>encryption_schemes</code> a list of the supported encryption
schemes.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    </table>


#### Response
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>encryption_schemes</code></td>
            <td>
                <code>vector&lt;string&gt;</code>
            </td>
        </tr></table>

## LicenseSession {#LicenseSession}
*Defined in [fuchsia.media.drm/license_session.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/license_session.fidl#87)*

<p>A protocol for exchanging messages pertaining to the establishment of a
media license and the encryption keys associated with it.</p>
<p>If the client closes the <code>LicenseSession</code>, any derived Decryptors will also
be closed as the encryption keys will no longer be maintained.</p>

### OnReady {#OnReady}

<p>Indicates that the <a class='link' href='#LicenseSession'>LicenseSession</a> has successfully initialized.</p>
<p>This is always the first message sent by the <code>LicenseSession</code>.</p>



#### Response
<table>
    <tr><th>Name</th><th>Type</th></tr>
    </table>

### GenerateLicenseRequest {#GenerateLicenseRequest}

<p>Generates a license request for a session based on the <code>init_data</code>.</p>
<p>When the <a class='link' href='#LicenseMessage'>LicenseMessage</a> has been created, the
<code>OnLicenseMessageGenerated</code> event will be triggered with the message to
be sent to the license server.</p>
<ul>
<li>request <code>init_data</code> container-specific data that is used to generate a
<a class='link' href='#LicenseMessageType.REQUEST'>LicenseMessageType.REQUEST</a> <code>LicenseMessage</code>.</li>
</ul>
<ul>
<li>error an <a class='link' href='#Error'>Error</a> indicating the reason for failure.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>init_data</code></td>
            <td>
                <code><a class='link' href='#LicenseInitData'>LicenseInitData</a></code>
            </td>
        </tr></table>


#### Response
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>result</code></td>
            <td>
                <code><a class='link' href='#LicenseSession_GenerateLicenseRequest_Result'>LicenseSession_GenerateLicenseRequest_Result</a></code>
            </td>
        </tr></table>

### GenerateLicenseRelease {#GenerateLicenseRelease}

<p>Inititiates the release process for the license session.</p>
<p>This will cause the <a class='link' href='#LicenseSession'>LicenseSession</a> to generate a <a class='link' href='#LicenseMessage'>LicenseMessage</a>
through the <code>OnLicenseMessageGenerated</code> event. The client must route
that message to the license server and the server's response to
<code>ProcessLicenseServerMessage</code>. Once the <code>LicenseSession</code> has received
the license server's reply, it will close the <code>LicenseSession</code> channel
as this session will no longer be usable.</p>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    </table>



### ProcessLicenseResponse {#ProcessLicenseResponse}

<p>Updates the <a class='link' href='#LicenseSession'>LicenseSession</a> with a message from the license server.</p>
<p>All responses from license requests, renewals, and releases should be
routed to the <code>LicenseSession</code> through this method.</p>
<ul>
<li>request <code>response</code> a message from the license server to update the
state of the <code>LicenseSession</code>.</li>
</ul>
<ul>
<li>error an <a class='link' href='#Error'>Error</a> indicating the reason for failure.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>response</code></td>
            <td>
                <code><a class='link' href='#LicenseServerMessage'>LicenseServerMessage</a></code>
            </td>
        </tr></table>


#### Response
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>result</code></td>
            <td>
                <code><a class='link' href='#LicenseSession_ProcessLicenseResponse_Result'>LicenseSession_ProcessLicenseResponse_Result</a></code>
            </td>
        </tr></table>

### CreateDecryptor {#CreateDecryptor}

<p>Creates a Decryptor <a class='link' href='../fuchsia.media/'>fuchsia.media</a>/<a class='link' href='../fuchsia.media/#StreamProcessor'>StreamProcessor</a> to be used to
decrypt content.</p>
<p>This <code>decryptor</code> would be restricted to only having access to the
keys maintained by this <a class='link' href='#LicenseSession'>LicenseSession</a>.</p>
<ul>
<li>request <code>params</code> the parameters with which to create the <code>decryptor</code>.</li>
<li>request <code>decryptor</code> the server endpoint of the
<code>fuchsia.media/StreamProcessor</code>.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>params</code></td>
            <td>
                <code><a class='link' href='#DecryptorParams'>DecryptorParams</a></code>
            </td>
        </tr><tr>
            <td><code>decryptor</code></td>
            <td>
                <code>request&lt;<a class='link' href='../fuchsia.media/'>fuchsia.media</a>/<a class='link' href='../fuchsia.media/#StreamProcessor'>StreamProcessor</a>&gt;</code>
            </td>
        </tr></table>



### OnLicenseMessageGenerated {#OnLicenseMessageGenerated}

<p>Provides a <a class='link' href='#LicenseMessage'>LicenseMessage</a> that should be sent to the license server.</p>
<p>The client is responsible for transporting this message to the license
server.</p>
<ul>
<li>response <code>request</code> a message from the <code>LicenseSession</code> that the client
should send to the license server.</li>
</ul>



#### Response
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>request</code></td>
            <td>
                <code><a class='link' href='#LicenseMessage'>LicenseMessage</a></code>
            </td>
        </tr></table>

### OnKeyStatesChanged {#OnKeyStatesChanged}

<p>Provides updated key state information.</p>
<p>Some examples on when this might occur would be on license creation,
expiration, renewal, or load of a persistent license session.</p>
<ul>
<li>response <code>key_states</code> a list of the key_ids and their related
<a class='link' href='#KeyStatusCode'>KeyStatusCode</a>s</li>
</ul>



#### Response
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>key_states</code></td>
            <td>
                <code>vector&lt;<a class='link' href='#KeyState'>KeyState</a>&gt;</code>
            </td>
        </tr></table>

## Provisioner {#Provisioner}
*Defined in [fuchsia.media.drm/provisioning.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/provisioning.fidl#32)*

<p>A protocol for exchanging messages pertaining to the establishment of a
provisioning certificate.</p>

### GetStatus {#GetStatus}

<p>Gets the current status of provisioning for this service instance.</p>
<ul>
<li>response <code>status</code> indicates whether the service instance is
sufficiently provisioned.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    </table>


#### Response
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>status</code></td>
            <td>
                <code><a class='link' href='#ProvisioningStatus'>ProvisioningStatus</a></code>
            </td>
        </tr></table>

### SetServerCertificate {#SetServerCertificate}

<p>Sets the certificate to be used for encrypting outgoing messages.</p>
<ul>
<li>request <code>certificate</code> a buffer containing the certificate to be used.</li>
</ul>
<ul>
<li>error an <a class='link' href='#Error'>Error</a> indicating the reason for failure.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>certificate</code></td>
            <td>
                <code>vector&lt;uint8&gt;</code>
            </td>
        </tr></table>


#### Response
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>result</code></td>
            <td>
                <code><a class='link' href='#Provisioner_SetServerCertificate_Result'>Provisioner_SetServerCertificate_Result</a></code>
            </td>
        </tr></table>

### GenerateProvisioningRequest {#GenerateProvisioningRequest}

<p>Generates a provisioning request for this service instance.</p>
<p>If the underlying DRM system requires provisioning for individual
providers (the owner of the service instance), then this method can be
used to generate <a class='link' href='#ProvisioningRequest'>ProvisioningRequest</a>s. This message must be routed
to the provisioning server by the client and the server's response must
be routed back to <code>ProcessProvisioningResponse</code>.</p>
<ul>
<li>response <code>request</code> a <code>ProvisioningRequest</code> message to be provided to a
provisioning server in order to receiving a provisioning certificate.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    </table>


#### Response
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>request</code></td>
            <td>
                <code><a class='link' href='#ProvisioningRequest'>ProvisioningRequest</a></code>
            </td>
        </tr></table>

### ProcessProvisioningResponse {#ProcessProvisioningResponse}

<p>Updates the <a class='link' href='#Provisioner'>Provisioner</a> with a message from the provisioning server.</p>
<p>Not all underlying DRM systems will require provisioning for individual
providers. If they do, this method will carry the provisioning message
to the service instance so that it may persistently store the provider
certificate.</p>
<ul>
<li>request <code>response</code> a <a class='link' href='#ProvisioningResponse'>ProvisioningResponse</a> from the provisioning
server. It should contain the provisioning certificate.</li>
</ul>
<ul>
<li>error an <a class='link' href='#Error'>Error</a> indicating the reason for failure.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>response</code></td>
            <td>
                <code><a class='link' href='#ProvisioningResponse'>ProvisioningResponse</a></code>
            </td>
        </tr></table>


#### Response
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>result</code></td>
            <td>
                <code><a class='link' href='#Provisioner_ProcessProvisioningResponse_Result'>Provisioner_ProcessProvisioningResponse_Result</a></code>
            </td>
        </tr></table>

### RemoveProvisioning {#RemoveProvisioning}

<p>Removes all provider based provisioning for this service instance.</p>
<p>Any active <a class='link' href='#ContentDecryptionModule'>ContentDecryptionModule</a>s on this service instance that
relied on this provisioning will be closed, as they will no longer be
usable without it. This does not impact any factory provisioning.</p>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    </table>



## ClearKey {#ClearKey}
*Defined in [fuchsia.media.drm/services.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/services.fidl#19)*

<p>A service hub providing access to the ClearKey key system. This key system
is defined by the <a class='link' href='#W3C Encrypted Media Extensions'>W3C Encrypted Media Extensions</a>. It uses plain-text
keys to decrypt the source.</p>
<p>If the client closes the <code>ClearKey</code> channel, derived
<code>ContentDecryptionModule</code>s will remain active.</p>
<p><a class='link' href='#W3C Encrypted Media Extensions'>W3C Encrypted Media Extensions</a>:
https://www.w3.org/TR/encrypted-media</p>

### CreateContentDecryptionModule {#CreateContentDecryptionModule}

<p>Creates a new <a class='link' href='#ContentDecryptionModule'>ContentDecryptionModule</a>.</p>
<ul>
<li>request <code>cdm</code> the server endpoint of the <code>ContentDecryptionModule</code>.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>cdm</code></td>
            <td>
                <code>request&lt;<a class='link' href='#ContentDecryptionModule'>ContentDecryptionModule</a>&gt;</code>
            </td>
        </tr></table>



## Widevine {#Widevine}
*Defined in [fuchsia.media.drm/services.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/services.fidl#31)*

<p>A service hub providing access to the Widevine key system.</p>
<p>If the client closes the <code>Widevine</code> channel, derived
<code>ContentDecryptionModule</code>s and <code>Provision</code>s will remain active.</p>

### CreateContentDecryptionModule {#CreateContentDecryptionModule}

<p>Creates a new <a class='link' href='#ContentDecryptionModule'>ContentDecryptionModule</a>.</p>
<p>The <code>ContentDecryptionModule</code>s created will share their persistent
state, but will not share active sessions.</p>
<ul>
<li>request <code>cdm</code> the server endpoint of the <code>ContentDecryptionModule</code>.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>cdm</code></td>
            <td>
                <code>request&lt;<a class='link' href='#ContentDecryptionModule'>ContentDecryptionModule</a>&gt;</code>
            </td>
        </tr></table>



### CreateProvisioner {#CreateProvisioner}

<p>Creates a new <a class='link' href='#Provisioner'>Provisioner</a>.</p>
<p>There can only be one active <code>Provisioner</code> for each service instance.</p>
<ul>
<li>request <code>provisioner</code> the server endpoint of the <code>Provisioner</code>.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>provisioner</code></td>
            <td>
                <code>request&lt;<a class='link' href='#Provisioner'>Provisioner</a>&gt;</code>
            </td>
        </tr></table>



## PlayReady {#PlayReady}
*Defined in [fuchsia.media.drm/services.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/services.fidl#53)*

<p>A service hub providing access to the PlayReady key system.</p>
<p>If the client closes the <code>PlayReady</code> channel, derived
<code>ContentDecryptionModule</code>s will remain active.</p>

### CreateContentDecryptionModule {#CreateContentDecryptionModule}

<p>Creates a new <a class='link' href='#ContentDecryptionModule'>ContentDecryptionModule</a>.</p>
<p>The <code>ContentDecryptionModule</code>s created will share their persistent
state, but will not share active sessions.</p>
<ul>
<li>request <code>cdm</code> the server endpoint of the <code>ContentDecryptionModule</code>.</li>
</ul>

#### Request
<table>
    <tr><th>Name</th><th>Type</th></tr>
    <tr>
            <td><code>cdm</code></td>
            <td>
                <code>request&lt;<a class='link' href='#ContentDecryptionModule'>ContentDecryptionModule</a>&gt;</code>
            </td>
        </tr></table>





## **STRUCTS**

### ContentDecryptionModule_SetServerCertificate_Response {#ContentDecryptionModule_SetServerCertificate_Response}
*generated*





<table>
    <tr><th>Name</th><th>Type</th><th>Description</th><th>Default</th></tr>
</table>

### LicenseSession_GenerateLicenseRequest_Response {#LicenseSession_GenerateLicenseRequest_Response}
*generated*





<table>
    <tr><th>Name</th><th>Type</th><th>Description</th><th>Default</th></tr>
</table>

### LicenseSession_ProcessLicenseResponse_Response {#LicenseSession_ProcessLicenseResponse_Response}
*generated*





<table>
    <tr><th>Name</th><th>Type</th><th>Description</th><th>Default</th></tr>
</table>

### LicenseInitData {#LicenseInitData}
*Defined in [fuchsia.media.drm/license_session.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/license_session.fidl#36)*





<table>
    <tr><th>Name</th><th>Type</th><th>Description</th><th>Default</th></tr><tr>
            <td><code>type</code></td>
            <td>
                <code>string</code>
            </td>
            <td><p>The type is a string that indicates the format of the accompanying init
data. Common types include &quot;cenc&quot;, &quot;keyids&quot;, &quot;webm&quot;, and &quot;hls&quot;. CDMs may
also define their own.</p>
</td>
            <td>No default</td>
        </tr><tr>
            <td><code>data</code></td>
            <td>
                <code>vector&lt;uint8&gt;</code>
            </td>
            <td></td>
            <td>No default</td>
        </tr>
</table>

### LicenseMessage {#LicenseMessage}
*Defined in [fuchsia.media.drm/license_session.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/license_session.fidl#46)*



<p>A message originating from the <a class='link' href='#LicenseSession'>LicenseSession</a> that the caller must route
to the license server.</p>


<table>
    <tr><th>Name</th><th>Type</th><th>Description</th><th>Default</th></tr><tr>
            <td><code>type</code></td>
            <td>
                <code><a class='link' href='#LicenseMessageType'>LicenseMessageType</a></code>
            </td>
            <td></td>
            <td>No default</td>
        </tr><tr>
            <td><code>message</code></td>
            <td>
                <code><a class='link' href='../fuchsia.mem/'>fuchsia.mem</a>/<a class='link' href='../fuchsia.mem/#Buffer'>Buffer</a></code>
            </td>
            <td></td>
            <td>No default</td>
        </tr>
</table>

### LicenseServerMessage {#LicenseServerMessage}
*Defined in [fuchsia.media.drm/license_session.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/license_session.fidl#53)*



<p>A message originating from the license server that the caller must provide
to the <a class='link' href='#LicenseSession'>LicenseSession</a> via <code>ProcessLicenseServerMessage</code>.</p>


<table>
    <tr><th>Name</th><th>Type</th><th>Description</th><th>Default</th></tr><tr>
            <td><code>message</code></td>
            <td>
                <code><a class='link' href='../fuchsia.mem/'>fuchsia.mem</a>/<a class='link' href='../fuchsia.mem/#Buffer'>Buffer</a></code>
            </td>
            <td></td>
            <td>No default</td>
        </tr>
</table>

### Provisioner_SetServerCertificate_Response {#Provisioner_SetServerCertificate_Response}
*generated*





<table>
    <tr><th>Name</th><th>Type</th><th>Description</th><th>Default</th></tr>
</table>

### Provisioner_ProcessProvisioningResponse_Response {#Provisioner_ProcessProvisioningResponse_Response}
*generated*





<table>
    <tr><th>Name</th><th>Type</th><th>Description</th><th>Default</th></tr>
</table>

### ProvisioningRequest {#ProvisioningRequest}
*Defined in [fuchsia.media.drm/provisioning.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/provisioning.fidl#16)*



<p>A message originating from the <a class='link' href='#Provisioner'>Provisioner</a> that the caller must route to
the provisioning server.</p>


<table>
    <tr><th>Name</th><th>Type</th><th>Description</th><th>Default</th></tr><tr>
            <td><code>default_provisioning_server_url</code></td>
            <td>
                <code>string?</code>
            </td>
            <td><p>An optional server to send the <a class='link' href='#ProvisioningRequest'>ProvisioningRequest</a> to. This field is
not required to be set and the client is not required to use it if one
is provided.</p>
</td>
            <td>No default</td>
        </tr><tr>
            <td><code>message</code></td>
            <td>
                <code><a class='link' href='../fuchsia.mem/'>fuchsia.mem</a>/<a class='link' href='../fuchsia.mem/#Buffer'>Buffer</a></code>
            </td>
            <td></td>
            <td>No default</td>
        </tr>
</table>

### ProvisioningResponse {#ProvisioningResponse}
*Defined in [fuchsia.media.drm/provisioning.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/provisioning.fidl#26)*



<p>A message originating from the provisioning server that the caller must
provide to <a class='link' href='#Provisioner.ProcessProvisioningResponse'>Provisioner.ProcessProvisioningResponse</a>.</p>


<table>
    <tr><th>Name</th><th>Type</th><th>Description</th><th>Default</th></tr><tr>
            <td><code>message</code></td>
            <td>
                <code><a class='link' href='../fuchsia.mem/'>fuchsia.mem</a>/<a class='link' href='../fuchsia.mem/#Buffer'>Buffer</a></code>
            </td>
            <td></td>
            <td>No default</td>
        </tr>
</table>



## **ENUMS**

### Error {#Error}
Type: <code>uint32</code>

*Defined in [fuchsia.media.drm/error.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/error.fidl#13)*

<p>Standard error codes for DRM related protocols. Many of the error code names
originate from the <a class='link' href='#W3C Encrypted Media Extensions'>W3C Encrypted Media Extensions</a> specification to cover
common CDM exception cases.</p>
<p><a class='link' href='#W3C Encrypted Media Extensions'>W3C Encrypted Media Extensions</a>:
https://www.w3.org/TR/encrypted-media</p>


<table>
    <tr><th>Name</th><th>Value</th><th>Description</th></tr><tr>
            <td><code>TYPE</code></td>
            <td><code>1</code></td>
            <td><p>An error that occurs when the client provides invalid parameter data to
the server, such as an invalid license response message.</p>
</td>
        </tr><tr>
            <td><code>NOT_SUPPORTED</code></td>
            <td><code>2</code></td>
            <td><p>An error that occurs when a requested operation is not supported by the
CDM, such as a license generation request with an unknown initialization
data type.</p>
</td>
        </tr><tr>
            <td><code>INVALID_STATE</code></td>
            <td><code>3</code></td>
            <td><p>An error that occurs when the CDM is not in a proper state to perform
the requested operation, such as calling
<a class='link' href='#LicenseSession.GenerateLicenseRequest'>LicenseSession.GenerateLicenseRequest</a> when the <a class='link' href='#LicenseSession'>LicenseSession</a>
has already started the license release process.</p>
</td>
        </tr><tr>
            <td><code>QUOTA_EXCEEDED</code></td>
            <td><code>4</code></td>
            <td><p>An error that occurs when a requested action would exceed allowable
limits, such as attempting to load an already opened session. </p>
</td>
        </tr><tr>
            <td><code>INTERNAL</code></td>
            <td><code>100</code></td>
            <td><p>An internal, unexpected error that is not actionable by the client.</p>
</td>
        </tr><tr>
            <td><code>NOT_PROVISIONED</code></td>
            <td><code>101</code></td>
            <td><p>An error that occurs when the CDM is not usable because it requires
additional provisioning.</p>
</td>
        </tr></table>

### LicenseSessionType {#LicenseSessionType}
Type: <code>uint32</code>

*Defined in [fuchsia.media.drm/license_session.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/license_session.fidl#17)*



<table>
    <tr><th>Name</th><th>Value</th><th>Description</th></tr><tr>
            <td><code>TEMPORARY</code></td>
            <td><code>1</code></td>
            <td><p>A session for which the license, keys, and record of the session are not
persisted.</p>
</td>
        </tr><tr>
            <td><code>PERSISTENT_LICENSE</code></td>
            <td><code>2</code></td>
            <td><p>A session for which the license, keys, and record of the session will be
persisted for offline use and can subsequently be loaded using
LoadSession().</p>
</td>
        </tr><tr>
            <td><code>PERSISTENT_USAGE_RECORD</code></td>
            <td><code>3</code></td>
            <td><p>A session for which the the record of the session will be persisted, but
the keys and license will not be.</p>
</td>
        </tr></table>

### LicenseMessageType {#LicenseMessageType}
Type: <code>uint32</code>

*Defined in [fuchsia.media.drm/license_session.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/license_session.fidl#30)*



<table>
    <tr><th>Name</th><th>Value</th><th>Description</th></tr><tr>
            <td><code>REQUEST</code></td>
            <td><code>1</code></td>
            <td></td>
        </tr><tr>
            <td><code>RENEWAL</code></td>
            <td><code>2</code></td>
            <td></td>
        </tr><tr>
            <td><code>RELEASE</code></td>
            <td><code>3</code></td>
            <td></td>
        </tr></table>

### KeyStatus {#KeyStatus}
Type: <code>uint32</code>

*Defined in [fuchsia.media.drm/license_session.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/license_session.fidl#57)*



<table>
    <tr><th>Name</th><th>Value</th><th>Description</th></tr><tr>
            <td><code>USABLE</code></td>
            <td><code>0</code></td>
            <td><p>The key is currently usable for decryption.</p>
</td>
        </tr><tr>
            <td><code>EXPIRED</code></td>
            <td><code>1</code></td>
            <td><p>The Key is no longer usable for decryption because it has expired.</p>
</td>
        </tr><tr>
            <td><code>RELEASED</code></td>
            <td><code>2</code></td>
            <td><p>The Key is no longer usable for decryption, but is still known to the
CDM.</p>
</td>
        </tr><tr>
            <td><code>OUTPUT_RESTRICTED</code></td>
            <td><code>3</code></td>
            <td><p>The Key has output restrictions that cannot currently be met and may be
unusable for decryption.</p>
</td>
        </tr><tr>
            <td><code>OUTPUT_DOWNSCALED</code></td>
            <td><code>4</code></td>
            <td><p>The Key has output restrictions that cannot currently be met. The Key
may be usable for decryption with lower quality content.</p>
</td>
        </tr><tr>
            <td><code>STATUS_PENDING</code></td>
            <td><code>5</code></td>
            <td><p>The Key is not yet known or usable for decryption.</p>
</td>
        </tr><tr>
            <td><code>INTERNAL_ERROR</code></td>
            <td><code>6</code></td>
            <td><p>The Key is not usable for decryption because of an internal error.</p>
</td>
        </tr></table>

### ProvisioningStatus {#ProvisioningStatus}
Type: <code>uint32</code>

*Defined in [fuchsia.media.drm/provisioning.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/provisioning.fidl#9)*



<table>
    <tr><th>Name</th><th>Value</th><th>Description</th></tr><tr>
            <td><code>NOT_PROVISIONED</code></td>
            <td><code>1</code></td>
            <td></td>
        </tr><tr>
            <td><code>PROVISIONED</code></td>
            <td><code>2</code></td>
            <td></td>
        </tr></table>



## **TABLES**

### DecryptorParams {#DecryptorParams}


*Defined in [fuchsia.media.drm/content_decryption.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/content_decryption.fidl#9)*



<table>
    <tr><th>Ordinal</th><th>Name</th><th>Type</th><th>Description</th></tr>
    <tr>
            <td>1</td>
            <td><code>require_secure_mode</code></td>
            <td>
                <code>bool</code>
            </td>
            <td><p>Requires the decryptor <a class='link' href='../fuchsia.media/'>fuchsia.media</a>/<a class='link' href='../fuchsia.media/#StreamProcessor'>StreamProcessor</a> to only output
to secure buffers.</p>
</td>
        </tr><tr>
            <td>2</td>
            <td><code>input_details</code></td>
            <td>
                <code><a class='link' href='../fuchsia.media/'>fuchsia.media</a>/<a class='link' href='../fuchsia.media/#FormatDetails'>FormatDetails</a></code>
            </td>
            <td><p>Initial format details for the <a class='link' href='../fuchsia.media/'>fuchsia.media</a>/<a class='link' href='../fuchsia.media/#StreamProcessor'>StreamProcessor</a>.</p>
</td>
        </tr></table>

### KeyState {#KeyState}


*Defined in [fuchsia.media.drm/license_session.fidl](https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/license_session.fidl#77)*



<table>
    <tr><th>Ordinal</th><th>Name</th><th>Type</th><th>Description</th></tr>
    <tr>
            <td>1</td>
            <td><code>key_id</code></td>
            <td>
                <code>vector&lt;uint8&gt;[16]</code>
            </td>
            <td></td>
        </tr><tr>
            <td>2</td>
            <td><code>status</code></td>
            <td>
                <code><a class='link' href='#KeyStatus'>KeyStatus</a></code>
            </td>
            <td></td>
        </tr></table>



## **UNIONS**

### ContentDecryptionModule_SetServerCertificate_Result {#ContentDecryptionModule_SetServerCertificate_Result}
*generated*


<table>
    <tr><th>Name</th><th>Type</th><th>Description</th></tr><tr>
            <td><code>response</code></td>
            <td>
                <code><a class='link' href='#ContentDecryptionModule_SetServerCertificate_Response'>ContentDecryptionModule_SetServerCertificate_Response</a></code>
            </td>
            <td></td>
        </tr><tr>
            <td><code>err</code></td>
            <td>
                <code><a class='link' href='#Error'>Error</a></code>
            </td>
            <td></td>
        </tr></table>

### LicenseSession_GenerateLicenseRequest_Result {#LicenseSession_GenerateLicenseRequest_Result}
*generated*


<table>
    <tr><th>Name</th><th>Type</th><th>Description</th></tr><tr>
            <td><code>response</code></td>
            <td>
                <code><a class='link' href='#LicenseSession_GenerateLicenseRequest_Response'>LicenseSession_GenerateLicenseRequest_Response</a></code>
            </td>
            <td></td>
        </tr><tr>
            <td><code>err</code></td>
            <td>
                <code><a class='link' href='#Error'>Error</a></code>
            </td>
            <td></td>
        </tr></table>

### LicenseSession_ProcessLicenseResponse_Result {#LicenseSession_ProcessLicenseResponse_Result}
*generated*


<table>
    <tr><th>Name</th><th>Type</th><th>Description</th></tr><tr>
            <td><code>response</code></td>
            <td>
                <code><a class='link' href='#LicenseSession_ProcessLicenseResponse_Response'>LicenseSession_ProcessLicenseResponse_Response</a></code>
            </td>
            <td></td>
        </tr><tr>
            <td><code>err</code></td>
            <td>
                <code><a class='link' href='#Error'>Error</a></code>
            </td>
            <td></td>
        </tr></table>

### Provisioner_SetServerCertificate_Result {#Provisioner_SetServerCertificate_Result}
*generated*


<table>
    <tr><th>Name</th><th>Type</th><th>Description</th></tr><tr>
            <td><code>response</code></td>
            <td>
                <code><a class='link' href='#Provisioner_SetServerCertificate_Response'>Provisioner_SetServerCertificate_Response</a></code>
            </td>
            <td></td>
        </tr><tr>
            <td><code>err</code></td>
            <td>
                <code><a class='link' href='#Error'>Error</a></code>
            </td>
            <td></td>
        </tr></table>

### Provisioner_ProcessProvisioningResponse_Result {#Provisioner_ProcessProvisioningResponse_Result}
*generated*


<table>
    <tr><th>Name</th><th>Type</th><th>Description</th></tr><tr>
            <td><code>response</code></td>
            <td>
                <code><a class='link' href='#Provisioner_ProcessProvisioningResponse_Response'>Provisioner_ProcessProvisioningResponse_Response</a></code>
            </td>
            <td></td>
        </tr><tr>
            <td><code>err</code></td>
            <td>
                <code><a class='link' href='#Error'>Error</a></code>
            </td>
            <td></td>
        </tr></table>







## **CONSTANTS**

<table>
    <tr><th>Name</th><th>Value</th><th>Type</th><th>Description</th></tr><tr>
            <td><a href="https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/license_session.fidl#12">LICENSE_INIT_DATA_TYPE_CENC</a></td>
            <td><code>cenc</code></td>
                    <td><code>String</code></td>
            <td></td>
        </tr>
    <tr>
            <td><a href="https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/license_session.fidl#13">LICENSE_INIT_DATA_TYPE_KEYIDS</a></td>
            <td><code>keyids</code></td>
                    <td><code>String</code></td>
            <td></td>
        </tr>
    <tr>
            <td><a href="https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/license_session.fidl#14">LICENSE_INIT_DATA_TYPE_WEBM</a></td>
            <td><code>webm</code></td>
                    <td><code>String</code></td>
            <td></td>
        </tr>
    <tr>
            <td><a href="https://fuchsia.googlesource.com/fuchsia/+/master/sdk/fidl/fuchsia.media.drm/license_session.fidl#15">LICENSE_INIT_DATA_TYPE_HLS</a></td>
            <td><code>hls</code></td>
                    <td><code>String</code></td>
            <td></td>
        </tr>
    
</table>



